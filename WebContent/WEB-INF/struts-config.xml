<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts-config PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 1.3//EN" "http://struts.apache.org/dtds/struts-config_1_3.dtd">
<!-- 
 * Licensed to The Apereo Foundation under one or more contributor license
 * agreements. See the NOTICE file distributed with this work for
 * additional information regarding copyright ownership.
 *
 * The Apereo Foundation licenses this file to you under the Apache License,
 * Version 2.0 (the "License"); you may not use this file except in
 * compliance with the License. You may obtain a copy of the License at:
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * 
 -->
<struts-config>

   <display-name>UniTime</display-name>
   <description>University Timetabling Application</description>
   
   <form-beans >
	  <form-bean name="distributionTypeListForm" type="org.unitime.timetable.form.DistributionTypeListForm" />
	  <form-bean name="distributionTypeEditForm" type="org.unitime.timetable.form.DistributionTypeEditForm" />
	  <form-bean name="sessionEditForm" type="org.unitime.timetable.form.SessionEditForm" />
	  <form-bean name="subjectListForm" type="org.unitime.timetable.form.SubjectListForm" />
	  <form-bean name="departmentListForm" type="org.unitime.timetable.form.DepartmentListForm" />
	  <form-bean name="mgrForm" type="org.unitime.timetable.form.TimetableManagerForm" />
	  <form-bean name="solverParamGroupsForm" type="org.unitime.timetable.form.SolverParamGroupsForm" />
	  <form-bean name="solverParamDefForm" type="org.unitime.timetable.form.SolverParamDefForm" />
	  <form-bean name="solverSettingsForm" type="org.unitime.timetable.form.SolverSettingsForm" />
	  <form-bean name="solverInfoDefForm" type="org.unitime.timetable.form.SolverInfoDefForm" />
	  <form-bean name="manageSolversForm" type="org.unitime.timetable.form.ManageSolversForm" />
      <form-bean name="solverGroupEditForm" type="org.unitime.timetable.form.SolverGroupEditForm" />
      <form-bean name="departmentEditForm" type="org.unitime.timetable.form.DepartmentEditForm" />
      <form-bean name="inquiryForm" type="org.unitime.timetable.form.InquiryForm" />
      <form-bean name="rollForwardSessionForm" type="org.unitime.timetable.form.RollForwardSessionForm" />
      <form-bean name="deptStatusTypeEditForm" type="org.unitime.timetable.form.DeptStatusTypeEditForm" />
      <form-bean name="subjectAreaEditForm" type="org.unitime.timetable.form.SubjectAreaEditForm" />
      <form-bean name="examPeriodEditForm" type="org.unitime.timetable.form.ExamPeriodEditForm" />
   </form-beans>

   <global-exceptions>
   		<exception key="errors.exception" type="Exception" path="/error.jsp" />
   </global-exceptions>

   <action-mappings >
      <action
         path="/sessionEdit"
         attribute="sessionEditForm"
         name="sessionEditForm"
         parameter="doit"
         scope="request"
         type="org.springframework.web.struts.DelegatingActionProxy"
         validate="false">
         <forward name="showEdit" path="sessionEditTile" />
         <forward name="showAdd" path="sessionAddTile" />
         <forward
            name="showSessionList"
            path="/sessionList.action"
            redirect="true" />
      </action>

      <action
         path="/distributionTypeEdit"
         attribute="distributionTypeEditForm"
         name="distributionTypeEditForm"
         parameter="do"
         scope="request"
         type="org.springframework.web.struts.DelegatingActionProxy">
         <forward name="showEdit" path="distributionTypeEditTile" />
         <forward
            name="showDistributionTypeList"
            path="/distributionTypeList.do"
            redirect="true" />
      </action>
      <action
         path="/distributionTypeList"
         attribute="distributionTypeListForm"
         input="distributionTypeListTile"
         name="distributionTypeListForm"
         scope="request"
         type="org.springframework.web.struts.DelegatingActionProxy"
         validate="false">
         <forward name="showDistributionTypeList" path="distributionTypeListTile" />
      </action> 
     
      <action
         path="/subjectList"
         attribute="subjectListForm"
         input="subjectListTile"
         name="subjectListForm"
         scope="request"
         type="org.springframework.web.struts.DelegatingActionProxy">
         <forward name="showSubjectList" path="subjectListTile" />
      </action>

      <action
      	path="/subjectAreaEdit"
	    type="org.springframework.web.struts.DelegatingActionProxy"
	    attribute="subjectAreaEditForm"
	    input="subjectAreaEditTile"
	    name="subjectAreaEditForm"
	    scope="request"
	    validate="false">
	    <forward 
	      	name="editSubjectArea" 
	      	path="subjectAreaEditTile" />
	    <forward 
	      	name="addSubjectArea" 
	      	path="subjectAreaAddTile" />
	    <forward 
	      	name="back" 
	      	path="/subjectList.do" />
      </action>
      
	 <action
         path="/departmentList"
         attribute="departmentListForm"
         input="departmentListTile"
         name="departmentListForm"
         scope="request"
         type="org.springframework.web.struts.DelegatingActionProxy">
         <forward name="showDepartmentList" path="departmentListTile" />
      </action>

      <action
         path="/timetableManagerEdit"
         type="org.springframework.web.struts.DelegatingActionProxy"
         attribute="mgrForm"
         input="mgrAddTile"
         name="mgrForm"
         scope="request"
         validate="false">
         <forward
            name="success"
            path="/timetableManagerList.do" />
         <forward
            name="fail"
            path="timetableManagerEditTile" />
         <forward
            name="editManagerInfo"
            path="timetableManagerEditTile" />
         <forward
            name="addManagerInfo"
            path="timetableManagerAddTile" />
         <forward
            name="displayManagerList"
            path="/timetableManagerList.do" />
      </action>

      <action
         path="/timetableManagerList"
         type="org.springframework.web.struts.DelegatingActionProxy"
         validate="false">
         <forward
            name="success"
            path="timetableManagerListTile"
            redirect="true" />
         <forward
            name="fail"
            path="/error.jsp"
            redirect="true" />
      </action>

      <action
      	path="/solverParamGroups"
      	type="org.springframework.web.struts.DelegatingActionProxy"
      	attribute="solverParamGroupsForm"
		input="solverParamGroupsTile"
		name="solverParamGroupsForm"
		scope="request"
		validate="false">
		<forward name="list" path="solverParamGroupsTile" />
		<forward name="edit" path="solverParamGroupsEditTile" />
		<forward name="add" path="solverParamGroupsAddTile" />
	  </action>
	  
	  <action
	  	path="/solverParamDef"
	  	type="org.springframework.web.struts.DelegatingActionProxy"
	  	attribute="solverParamDefForm"
	  	input="solverParamDefTile"
	  	name="solverParamDefForm"
	  	scope="request"
	  	validate="false">
		<forward name="list" path="solverParamDefTile" />
		<forward name="edit" path="solverParamDefEditTile" />
		<forward name="add" path="solverParamDefAddTile" />
      </action>
      
      <action
      	path="/solverSettings"
      	type="org.springframework.web.struts.DelegatingActionProxy"
      	attribute="solverSettingsForm"
      	input="solverSettingsTile"
      	name="solverSettingsForm"
      	scope="request"
      	validate="false">
      	<forward name="list" path="solverSettingsTile"/>
      	<forward name="add" path="solverSettingsAddTile"/>
      	<forward name="edit" path="solverSettingsEditTile"/>
        </action>
        
        <action
			path="/solverInfoDef"
			type="org.springframework.web.struts.DelegatingActionProxy"
			attribute="solverInfoDefForm"
			input="solverInfoDefTile"
			name="solverInfoDefForm"
			scope="request"
			validate="false">
   		  <forward
	        name="showSolverInfoDef"
    	    path="solverInfoDefTile"
	        redirect="true" />
	    </action>
	    
    <action
    	path="/solverLog"
    	type="org.springframework.web.struts.DelegatingActionProxy"
    	attribute="solverLogForm"
    	input="solverLogTile"
    	name="solverLogForm"
    	scope="request"
    	validate="false">
    	<forward
    		name="showLog"
    		path="solverLogTile"
    		redirect="true" />
    </action>
    <action
		path="/manageSolvers"
		type="org.springframework.web.struts.DelegatingActionProxy"
		attribute="manageSolversForm"
		input="manageSolversTile"
		name="manageSolversForm"
		scope="request"
		validate="false">
      <forward
        name="showSolvers"
        path="manageSolversTile"
        redirect="true" />
    </action>
    
	    <action
	      path="/solverGroupEdit"
	      attribute="solverGroupEditForm"
	      input="solverGroupTile"
	      name="solverGroupEditForm"
	      scope="request"
	      type="org.springframework.web.struts.DelegatingActionProxy" 
	      validate="false">
	      <forward name="list" path="solverGroupTile" />
	      <forward name="add" path="solverGroupAddTile" />
	      <forward name="edit" path="solverGroupEditTile" />
	    </action>

    <action
       path="/departmentEdit"
       type="org.springframework.web.struts.DelegatingActionProxy"
       attribute="departmentEditForm"
       input="departmentEditTile"
       name="departmentEditForm"
       scope="request"
       validate="false">
       <forward 
       		name="back" 
       		path="/departmentList.do" />
       <forward 
       		name="add" 
       		path="departmentAddTile" />
       <forward 
       		name="edit" 
       		path="departmentEditTile" />
    </action>
    
    <action
       path="/deptStatusTypeEdit"
       type="org.springframework.web.struts.DelegatingActionProxy"
       attribute="deptStatusTypeEditForm"
       input="deptStatusTypeEditTile"
       name="deptStatusTypeEditForm"
       scope="request"
       validate="false" >
       <forward name="list" path="deptStatusTypeListTile" />
       <forward name="add" path="deptStatusTypeAddTile" />
       <forward name="edit" path="deptStatusTypeEditTile" />
    </action>

    <action
      attribute="rollForwardSessionForm"
      input="rollForwardSessionTile"
      name="rollForwardSessionForm"
      path="/rollForwardSession"
      scope="request"
      validate="false"
      type="org.springframework.web.struts.DelegatingActionProxy" >
       <forward 
       		name="displayRollForwardSessionForm" 
       		path="rollForwardSessionTile" />
       <forward 
       		name="submit" 
       		path="/rollForwardSession.do" />
      </action>

    <action
      attribute="examPeriodEditForm"
      input="examPeriodsTile"
      name="examPeriodEditForm"
      path="/examPeriodEdit"
      scope="request"
      type="org.springframework.web.struts.DelegatingActionProxy" 
      validate="false">
      <forward name="list" path="examPeriodsTile" />
      <forward name="add" path="addExamPeriodTile" />
      <forward name="edit" path="editExamPeriodTile" />
      <forward name="midterm" path="midtermExamPeriodTile" />
    </action>

    </action-mappings>

	<!-- Tiles Request Processor -->	
	<controller processorClass="org.apache.struts.tiles.TilesRequestProcessor"/>

	<!-- Message Resource Keys -->
    <message-resources parameter="messages"/>
   		
	<!-- Add the following line to tag above in development to avoid reloading of application. -->
	<!-- 
   		factory="org.unitime.timetable.util.MessageResourcesFactory" 
	-->
 
	<!-- Tiles Plugin -->
	<plug-in className="org.apache.struts.tiles.TilesPlugin" >
	  	<set-property
	  		property="definitions-config"
	  		value="/WEB-INF/tiles-defs.xml" />
	  	<set-property
	  		property="definitions-debug"
	  		value="3" />
		<set-property
	  		property="definitions-parser-details"
	  		value="3" />
	  	<set-property
	  		property="definitions-parser-validate"
	  		value="true" />
	</plug-in>
	
	<plug-in className="org.springframework.web.struts.ContextLoaderPlugIn"/>

</struts-config>
